---
import Confirmation from '@/components/Confirmation.astro'
import Countdown from '@/components/Countdown.astro'
import Galeria from '@/components/Galeria.astro'
import Hero from '@/components/Hero.astro'
import Hotels from '@/components/Hotels.astro'
import Invitation from '@/components/Invitation.astro'
import Player from '@/components/Player.astro'
import Regalos from '@/components/Regalos.astro'
import Requirements from '@/components/Requirements.astro'
import Schedule from '@/components/Schedule.astro'
import SimpleParallax from '@/components/SimpleParallax.astro'
import Sponsors from '@/components/Sponsors.astro'
import { parallaxImages, prefix } from '@/constants'
import Layout from '@/layouts/Layout.astro'

const { slug } = Astro.params

let API_URL = import.meta.env.API_URL_DEV

if (import.meta.env.PROD) {
  API_URL = import.meta.env.API_URL_PROD
}

const res = await fetch(API_URL)
const invitados = await res.json()

const invitado = invitados.find((pages) => pages.id === slug)

if (!invitado) return Astro.redirect('/')

const { id, nombre, pases, confirmado } = invitado
---

<Layout title='XV Fernanda'>
  <Hero
    title='María Fernanda'
    description='¡Mis XV años!'
    date='Sábado, 9 de Noviembre 2024'
    image={parallaxImages.hero}
  />

  <Invitation
    header='Será una noche mágica para mí y me encantaría que la disfrutes conmigo. Espero verte ahí.'
    name={nombre}
    persons=`${pases} pases`
    footer='¡Me hará muy feliz que me acompañes en este día tan especial!'
  />

  <Sponsors
    message='Hoy celebro quince años de vida rodeada de amor y apoyo incondicional. Mi familia ha sido el mejor regalo en este viaje.'
    image={parallaxImages.sponsors}
    groups={[
      {
        title: 'Mis papás',
        persons: ['Roberto González Ruiz', 'Monserrat Ojeda Camargo']
      },
      {
        title: 'Mis hermanos',
        persons: ['Roberto González', 'Carol González']
      }
    ]}
  />

  <SimpleParallax image={parallaxImages.showcase} />

  <Schedule
    title='Dónde y cuando'
    description='La recepción se llevará a cabo en:'
    date='Sábado, 9 de Noviembre 2024'
    times={['Recepción: 7:30pm - 1:00am']}
    location={{
      name: 'Uro Eventos',
      address: 'Carr Nacional kilometro 261, Quince de Mayo (Larralde), 64987 Monterrey, N.L.',
      link: 'https://maps.app.goo.gl/yoYW3L3CCYPvHRS98'
    }}
  />

  <Requirements
    image={parallaxImages.requirements}
    title='Dress code'
    code='Formal'
  />

  <Galeria
    title='Galería'
    message='Después de grandes momentos, sólo quedan magníficos recuerdos.'
    images={[
      `${prefix}/img/photo-1.webp`,
      `${prefix}/img/photo-9.webp`,
      `${prefix}/img/photo-10.webp`,
      `${prefix}/img/photo-2.webp`,
      `${prefix}/img/photo-11.webp`,
      `${prefix}/img/photo-12.webp`,
      `${prefix}/img/photo-3.webp`,
      `${prefix}/img/photo-13.webp`,
      `${prefix}/img/photo-14.webp`,
      `${prefix}/img/photo-4.webp`,
      `${prefix}/img/photo-15.webp`,
      `${prefix}/img/photo-16.webp`,
      `${prefix}/img/photo-5.webp`,
      `${prefix}/img/photo-17.webp`,
      `${prefix}/img/photo-18.webp`,
      `${prefix}/img/photo-6.webp`,
      `${prefix}/img/photo-19.webp`,
      `${prefix}/img/photo-7.webp`
    ]}
  />

  <Regalos
    image={parallaxImages.regalos}
    title='Mesa de regalos'
    description='Tu presencia es mi mayor regalo, pero si deseas tener un detalle conmigo, lo puedes hacer depositándolo en un sobre.'
  />

  <Countdown image={parallaxImages.countdown} />

  <Hotels
    title='Hospedaje'
    description='Para una estadía más placentera te compartimos estas sugerencias de hospedaje.'
    hotels={[
      {
        name: 'Hotel One',
        phone: '+52 81 25 25 00 70',
        address: 'Av. Eugenio Garza Sada 2408, Roma, 64700 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/heiNetDMC71a6v5x6'
      },
      {
        name: 'Hotel Fiesta Inn',
        phone: '+52 81 18 77 02 00',
        address:
          'Av. Eugenio Garza Sada 2411, Tecnológico, 64700 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/SEtAoHfuEkUucbr17'
      },
      {
        name: 'Hotel Holiday Inn Express',
        phone: '+52 81 83 29 60 00',
        address:
          'Av. Eugenio Garza Sada 3680-sur, Villa Los Pinos, 64770 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/ioEdRoErD2AbYNBk8'
      },
      {
        name: 'Motel La Mansión',
        phone: '+52 81 81 04 07 63',
        address:
          'Santiago-Monterrey 271, Villas La Rioja, 64984 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/Ai3B1mgtVYmVJKkq5'
      },
      {
        name: 'Motel Dali',
        phone: '+52 81 81 04 07 01',
        address: 'Carr Nacional 1200, Las Diligencias, 64987 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/hdv1qyVT17YVzaHcA'
      },
      {
        name: 'Kyoto Suites Motel',
        phone: '+52 81 10 99 40 91',
        address: 'Carr Nacional Km 266, Col. El Uro, 64986 Monterrey, N.L.',
        link: 'https://maps.app.goo.gl/g9dLqWsJUZ7KfW3S6'
      }
    ]}
  />

  <Confirmation
    image={parallaxImages.confirmation}
    title='Confirmación'
    description='Es muy importante para nosotros contar con tu confirmación.'
    confirmed={confirmado}
    pases={pases}
    id={id}
  />

  <Player />
</Layout>
